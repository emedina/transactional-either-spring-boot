name: Vulnerability Scan

on:
  push:
    # Specify here default branch. Optionally the list can be extended with protected branches.
    branches: [ develop, master ]

  pull_request:
    # The branches below must be a subset of the branches above
    branches: [ master ]
    types: [ opened, reopened, synchronize ]
    paths-ignore: [ '**/*.md', '**/*.txt' ]

  # Trigger workflow at scheduled time.
  # See https://docs.github.com/en/actions/using-workflows/events-that-trigger-workflows#schedule
  schedule:
    - cron: '4 5 * * 0'

  # Manually trigger workflow.
  workflow_dispatch: {}

jobs:
  scan:
    name: Scan
    uses: platform/workflow-collection/.github/workflows/vulnerability-scan.yaml@4.15
    with:
      runs-on: cloud-native-engineering-default
      log-level: INFO
      build-tool: mvn
      java-version: 21
      java-distribution: corretto
